#
# $Id$
# $Source$
# Copyright 2010 Brad Lanam, Walnut Creek, California USA
#
#
option-file ../dioptions.dat

loadunit d-main

output   config.d

standard

csizes

chdr    libintl.h
chdr    linux/dqblk_xfs.h
chdr    linux/quota.h
chdr    mntent.h
chdr    rpc/rpc.h
chdr    rpcsvc/rquota.h
chdr    rpc/types.h
chdr    ufs/quota.h
chdr    ufs/ufs/quota.h
#chdr    windows.h

csys    fs/ufs_quota.h
csys    quota.h
csys    types.h
csys    statvfs.h

# di
chdr    version.h

clib    bindtextdomain -lintl, -lintl -liconv
clib    endmntent
#clib    GetDiskFreeSpace
#clib    GetDiskFreeSpaceEx
#clib    GetDriveType
#clib    GetLogicalDriveStrings
#clib    GetVolumeInformation
clib    getmntent -lgen
clib    gettext -lintl, -lintl -liconv
clib    getvfsstat
clib    quotactl
clib    setmntent
clib    statvfs

# Linux: _PATH_MOUNTED mntent.h; MNTTYPE_IGNORE mntent.h
cdefstr _PATH_MOUNTED
cdefstr _PATH_MNTTAB
cdefstr MOUNTED
cdefstr MNTTAB
cdefstr MNTTYPE_IGNORE

# di
cdefstr DI_VERSION

# linux
ctypeconv   int __fsblkcnt_t
ctypeconv   int __fsfilcnt_t
# linux, 64-bit interface
ctypeconv   int __fsblkcnt64_t
ctypeconv   int __fsfilcnt64_t
# linux
cstruct statvfs

# linux
cstruct mntent

# from rpcsvc/rquota.h
ctypeconv   int bool_t
ctypeconv   int u_int
ctypeconv   int u_int64_t
ctypeconv   int u_int32_t
cstruct rquota
ctypedef rquota
cenum   gqr_status
### need a check for typedef ...rquota
### convert it to an alias.
cstruct getquota_rslt
cstruct dqblk

cdcl    bindtextdomain
cdcl    endmntent
#cdcl    GetDiskFreeSpace
#cdcl    GetDiskFreeSpaceEx
#cdcl    GetDriveType
#cdcl    GetLogicalDriveStrings
#cdcl    GetVolumeInformation
cdcl    getmntent
cdcl    gettext
#cdcl    getvfsstat
cdcl    args setmntent
cdcl    statvfs
cmember  statvfs f_basetype
cmember  dqblk dqb_curspace
cmember  dqblk dqb_curblocks
cmember  dqblk dqb_fhardlimit
cmember  dqblk dqb_fsoftlimit
cmember  dqblk dqb_curfiles
cmember  getquota_rslt gqr_status
cmember  getquota_rslt gqr_rquota

# see dioptions.dat to change these
option  DI_DEFAULT_FORMAT smbuvpT
option  DI_DEFAULT_DISP_SIZE H

include

import core.stdc.stdio;  // for FILE

endinclude
